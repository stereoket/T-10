<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: controllers/alertT10.js</title>
    
    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">
    
    <h1 class="page-title">Source: controllers/alertT10.js</h1>
    
    


    
    <section>
        <article>
            <pre class="prettyprint source"><code>/**
 * Add Event/Space section opening controller file
 */

var Helper = require('Helper');
var log = Helper.log;
var sim = false;

/**
 * Open the Space / Add Event windoe
 * @return {void} [description]
 */

function open(params) {
	$.alertT10.addEventListener('blur', function (e) {
		Ti.API.warn("alertT10 window closed");
		clearInterval(bgFlash);
		if (!Ti.App.Properties.getBool('settingsFlag')) {
			$.alertT10.close();
		}
	});
	sim = params.simulation || false;
	$.winTitle.text = params.city + " in T-10";
	$.alertT10.open();
	$.alertT10.city = params.city;
	$.alertT10.starttime = params.starttime;
	var bgStateOn = false;
	// animate alert flashing screen

	function animateBackground() {
		bgStateOn = !bgStateOn;
		switch (bgStateOn) {
		case true:
			$.alertT10.backgroundImage = "/images/blueiPadBg.png";
			break;

		case false:
			$.alertT10.backgroundImage = "/images/rediPadBg.png";
			break
		}
	}
	var bgFlash = setInterval(animateBackground, 750);
}

/**
 * [triggerCountdown description]
 * @return {void} [description]
 */
function triggerCountdown() {
	log("WARN", "Add Event Clicked");
	if(sim){
		log("WARN", "Simulated Time");
		var nowtime = new Date().getTime() / 1000;
		var alertTime = (nowtime + (60 * 10));
	} else {
		log("WARN", "REAL Time setting");
		alertTime = $.alertT10.starttime;
	}
	var countdown = Alloy.createController('countdown');
	countdown.open({
		city: $.alertT10.city,
		starttime: alertTime,
		simulation: sim?true:false
	});
	// $.space.close();
}

function ignore() {
	var nextPasses = Alloy.createController('next_passes');
	nextPasses.open();
	$.alertT10.close();
}

exports.open = open;</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Index</a></h2><h3>Modules</h3><ul><li><a href="module-Cloud.html">Cloud</a></li><li><a href="module-CloudPush.html">CloudPush</a></li><li><a href="module-Config.html">Config</a></li><li><a href="module-LocalNotifications.html">LocalNotifications</a></li><li><a href="module-space_addEvent.html">space_addEvent</a></li></ul><h3>Classes</h3><ul><li><a href="ACSpush.html">ACSpush</a></li></ul><h3>Global</h3><ul><li><a href="global.html#_saveLocation">_saveLocation</a></li><li><a href="global.html#actionDeleteButtons">actionDeleteButtons</a></li><li><a href="global.html#addLocation">addLocation</a></li><li><a href="global.html#addNewLocation">addNewLocation</a></li><li><a href="global.html#ANDROID">ANDROID</a></li><li><a href="global.html#checkCity">checkCity</a></li><li><a href="global.html#checkNetwork">checkNetwork</a></li><li><a href="global.html#close">close</a></li><li><a href="global.html#createIndicator">createIndicator</a></li><li><a href="global.html#createMessageView">createMessageView</a></li><li><a href="global.html#createNextPassArray">createNextPassArray</a></li><li><a href="global.html#defaultTimeout">defaultTimeout</a></li><li><a href="global.html#editLocation">editLocation</a></li><li><a href="global.html#getAllLocations">getAllLocations</a></li><li><a href="global.html#Helper">Helper</a></li><li><a href="global.html#hideIndicator">hideIndicator</a></li><li><a href="global.html#home">home</a></li><li><a href="global.html#isSimulator">isSimulator</a></li><li><a href="global.html#log">log</a></li><li><a href="global.html#notify">notify</a></li><li><a href="global.html#notifyAstro">notifyAstro</a></li><li><a href="global.html#open">open</a></li><li><a href="global.html#setIndicatorTimeout">setIndicatorTimeout</a></li><li><a href="global.html#SIMULATOR">SIMULATOR</a></li><li><a href="global.html#triggerCountdown">triggerCountdown</a></li><li><a href="global.html#updateCityPasses">updateCityPasses</a></li><li><a href="global.html#writeToAppDataDirectory">writeToAppDataDirectory</a></li></ul>
</nav>

<br clear="both">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.2.0-dev</a> on Sun Jul 28 2013 13:46:09 GMT+0100 (BST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
